<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BAYASI üéûÔ∏è ‚Äî Elmar B…ôy Asi</title>
<style>
body {margin:0;font-family:Arial,sans-serif;background:#0b0012;color:#fff;transition:0.3s;}
body.light{background:#f5f5f5;color:#111;}
header{padding:30px 10px;text-align:center;position:relative;}
header h1{font-size:60px;color:#ff00ff;text-shadow:0 0 10px #fff,0 0 30px #ff77ff;}
header h1:hover{text-shadow:0 0 20px #fff,0 0 50px #ff77ff;}
#bio{font-style:italic;opacity:0.85;margin-top:-10px;}
.toggle-theme{position:absolute; top:15px; right:15px; padding:8px 12px; background:#aa00ff;color:#fff;border:none;border-radius:8px;cursor:pointer;}
.toggle-theme:hover{background:#ff00ff;}
.about-me{width:90%;margin:20px auto;padding:20px;border-radius:20px;background:linear-gradient(145deg,#1a001f,#2a0035);}
body.light .about-me{background:#ddd;color:#111;}
.about-me h2{color:#ff77ff;border-left:6px solid #aa00ff;padding-left:10px;}
#searchBox,#categoryFilter{width:90%;margin:15px auto;display:block;padding:10px;border-radius:12px;border:none;background:rgba(255,255,255,0.05);color:#fff;}
body.light #searchBox, body.light #categoryFilter{background:rgba(0,0,0,0.05);color:#111;}
.poem{width:90%;margin:15px auto;background:linear-gradient(145deg,#1a0a1f,#2a003a);padding:15px;border-radius:20px;box-shadow:0 0 15px rgba(255,255,255,0.2);transition:0.5s;position:relative;}
.poem:hover{transform:scale(1.02);box-shadow:0 0 50px rgba(255,255,255,0.4);}
.poem h2{border-left:4px solid #ff00ff;padding-left:10px;}
.poem-category{opacity:0.7;margin-bottom:8px;}
.poem pre {white-space: pre-wrap; word-wrap: break-word;}
.comment-btn,.add-comment,.admin-add,.subscribe-btn,.delete-btn,.edit-btn,.fav-btn{background:#aa00ff;border:none;padding:6px 12px;color:#fff;border-radius:8px;cursor:pointer;margin-top:8px;transition:0.3s;}
.comment-btn:hover,.add-comment:hover,.admin-add:hover,.subscribe-btn:hover,.delete-btn:hover,.edit-btn:hover,.fav-btn:hover{background:#ff00ff;}
.comments-box{display:none;margin-top:10px;}
.comments-box textarea{width:100%;height:70px;padding:8px;border-radius:8px;border:none;background:#220033;color:#fff;}
body.light .comments-box textarea{background:#ddd;color:#111;}
.all-comments{margin-top:8px;background:#222;padding:8px;border-radius:8px;}
body.light .all-comments{background:#ccc;color:#111;}
.stars{font-size:20px;cursor:pointer;letter-spacing:4px;}
.stars span{transition:0.3s;color:#888;}
.stars span.active{color:gold;}
#adminPanel{width:90%;margin:20px auto;padding:15px;background:#220033;border-radius:20px;}
#adminPanel input,#adminPanel select,#adminPanel textarea{width:100%;margin-bottom:8px;padding:10px;border-radius:8px;border:none;background:#330044;color:#fff;}
body.light #adminPanel{background:#ddd;color:#111;}
#adminPanel textarea, body.light #adminPanel textarea{background:#fff;color:#111;}
#subscribeModal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);justify-content:center;align-items:center;z-index:1000;}
#subscribeModal .modal-content{background:#220033;padding:20px;border-radius:20px;width:90%;max-width:400px;text-align:center;}
#subscribeModal input{width:80%;padding:10px;border-radius:12px;border:none;margin-bottom:10px;background:#330044;color:#fff;font-size:14px;}
#subscribeModal button{width:50%;padding:8px;border-radius:12px;border:none;background:#aa00ff;color:#fff;cursor:pointer;}
#subscribeModal button:hover{background:#ff00ff;}
#popular, #recent{width:90%;margin:20px auto;}
#popular h3,#recent h3{color:#ff77ff;}
</style>
</head>
<body>

<header>
  <h1>BAYASI üéûÔ∏è</h1>
  <button class="toggle-theme">üåô / ‚òÄÔ∏è</button>
  <div id="bio">M…ôn Elmar B…ôy Asi ‚Äî yazdƒ±ƒüƒ±m ≈üeirl…ôr il…ô ruhunuza toxunuram...</div>
  <button class="subscribe-btn">Abun…ô ol</button>
</header>

<div class="about-me">
<h2>Haqqƒ±mda</h2>
<pre>M…ôn Elmar B…ôy Asi ‚Äî ≈üeirl…ôrin, q…ôlbin v…ô d√º≈ü√ºnc…ônin s…ôssiz melodiyasƒ±nƒ± ara≈üdƒ±rƒ±ram...</pre>
</div>

<input type="text" id="searchBox" placeholder="≈ûeir axtar...">
<select id="categoryFilter">
  <option value="All">B√ºt√ºn kateqoriyalar</option>
  <option value="Sevgi">Sevgi</option>
  <option value="H√ºz√ºn">H√ºz√ºn</option>
  <option value="Motivasiya">Motivasiya</option>
</select>

<div id="popular"><h3>Populyar ≈ûeirl…ôr</h3><div id="popularList"></div></div>
<div id="recent"><h3>Son ∆èlav…ô Olunanlar</h3><div id="recentList"></div></div>

<div id="poemsContainer"></div>

<div id="adminPanel">
<h3>Admin: ≈ûeir …ôlav…ô et</h3>
<input type="text" id="poemTitle" placeholder="Ba≈ülƒ±q">
<select id="poemCategory">
  <option value="Sevgi">Sevgi</option>
  <option value="H√ºz√ºn">H√ºz√ºn</option>
  <option value="Motivasiya">Motivasiya</option>
</select>
<textarea id="poemText" placeholder="≈ûeir m…ôtnini daxil et"></textarea>
<button class="admin-add">∆èlav…ô et</button>
</div>

<div id="subscribeModal">
<div class="modal-content">
<h3>Abun…ô ol</h3>
<input type="email" id="subscriberEmail" placeholder="Emailinizi daxil edin">
<button id="subscribeBtn">Abun…ô ol</button>
</div>
</div>

<script>
// LOCAL STORAGE FUNKSƒ∞YALARI
function getPoems(){return JSON.parse(localStorage.getItem("poems")||"[]");}
function setPoems(p){localStorage.setItem("poems",JSON.stringify(p));}

// THEME STATE
if(localStorage.getItem("theme")==="light") document.body.classList.add("light");

// RENDER ≈ûEƒ∞RL∆èR
function renderPoems(){
  const container=document.getElementById("poemsContainer");
  const popularList=document.getElementById("popularList");
  const recentList=document.getElementById("recentList");
  const searchVal=document.getElementById("searchBox").value.toLowerCase();
  const category=document.getElementById("categoryFilter").value;

  container.innerHTML=""; popularList.innerHTML=""; recentList.innerHTML="";
  const poems=getPoems();

  // Populyar
  poems.slice().sort((a,b)=>(b.rating||0)-(a.rating||0)).slice(0,3).forEach(p=>{
    const div=document.createElement("div"); 
    div.innerHTML=`<a href="#${p.id}" style="color:#ff77ff;text-decoration:none;">${p.title}</a>`; 
    popularList.appendChild(div);
  });

  // Son …ôlav…ô olunanlar
  poems.slice(-3).forEach(p=>{
    const div=document.createElement("div"); 
    div.innerHTML=`<a href="#${p.id}" style="color:#ff77ff;text-decoration:none;">${p.title}</a>`; 
    recentList.appendChild(div);
  });

  poems.forEach((p)=>{
    if(category!=="All" && p.category!==category) return;
    if(!p.title.toLowerCase().includes(searchVal) && !p.text.toLowerCase().includes(searchVal)) return;

    const div=document.createElement("div"); div.className="poem"; div.id=p.id;
    let starsHtml="";
    for(let i=1;i<=3;i++){ starsHtml+=`<span${p.rating>=i?' class="active"':''}>‚òÖ</span>`; }

    div.innerHTML=`<h2>${p.title}</h2>
      <div class="poem-category">${p.category}</div>
      <pre>${p.text}</pre>
      <div class="poem-actions">
        <div class="stars" data-id="${p.id}">${starsHtml}</div>
        <button class="comment-btn">≈û…ôrhl…ôr</button>
        <button class="edit-btn" data-id="${p.id}">Redakt…ô</button>
        <button class="delete-btn" data-id="${p.id}">Sil</button>
      </div>
      <div class="comments-box"><div class="all-comments"></div>
      <textarea placeholder="≈û…ôrhini yaz..."></textarea>
      <button class="add-comment">G√∂nd…ôr</button></div>`;
    container.appendChild(div);

    // ≈ü…ôrhl…ôri render et
    const commentsBox=div.querySelector(".all-comments");
    if(p.comments) p.comments.forEach(c=>{
      const d=document.createElement("div"); d.innerText=c; d.style.padding="4px"; d.style.borderBottom="1px solid #333";
      commentsBox.appendChild(d);
    });
  });

  attachEvents();

  // Populyar / Son ∆èlav…ô link scroll
  document.querySelectorAll("#popularList a, #recentList a").forEach(a=>{
    a.onclick=(e)=>{
      e.preventDefault();
      const target=document.getElementById(a.getAttribute("href").substring(1));
      if(target) target.scrollIntoView({behavior:"smooth"});
    };
  });
}

// EVENTL∆èR
function attachEvents(){
  document.querySelectorAll(".comment-btn").forEach(b=>b.onclick=()=>{
    let box=b.parentElement.nextElementSibling; 
    box.style.display=box.style.display==="block"?"none":"block";
  });

  document.querySelectorAll(".add-comment").forEach(b=>{
    b.onclick=()=>{
      const box=b.parentElement; 
      const text=box.querySelector("textarea").value.trim();
      if(!text)return;
      const poemId=b.closest(".poem").id;
      const poems=getPoems();
      const poem=poems.find(p=>p.id===poemId);
      if(!poem.comments) poem.comments=[];
      poem.comments.push("Anonim: "+text);
      setPoems(poems);
      renderPoems();
    };
  });

  document.querySelectorAll(".delete-btn").forEach(b=>b.onclick=()=>{
    const id=b.dataset.id;
    let poems=getPoems(); 
    setPoems(poems.filter(p=>p.id!==id));
    renderPoems();
  });

  document.querySelectorAll(".edit-btn").forEach(b=>b.onclick=()=>{
    const id=b.dataset.id;
    const poems=getPoems();
    const poem=poems.find(p=>p.id===id);
    if(!poem) return;
    document.getElementById("poemTitle").value=poem.title;
    document.getElementById("poemText").value=poem.text;
    document.getElementById("poemCategory").value=poem.category;
    setPoems(poems.filter(p=>p.id!==id));
    renderPoems();
  });

  document.querySelectorAll(".stars").forEach(box=>{
    const stars=box.querySelectorAll("span");
    stars.forEach((s,idx)=>s.onclick=()=>{
      const id=box.dataset.id;
      const poems=getPoems();
      const poem=poems.find(p=>p.id===id);
      if(!poem) return;
      poem.rating=idx+1;
      setPoems(poems);
      renderPoems();
    });
  });
}

// ADMIN ∆èLAV∆è
document.querySelector(".admin-add").onclick=()=>{
  const title=document.getElementById("poemTitle").value.trim();
  const text=document.getElementById("poemText").value.trim();
  const category=document.getElementById("poemCategory").value;
  if(!title||!text){alert("Ba≈ülƒ±q v…ô ≈üeir bo≈ü ola bilm…ôz!"); return;}
  const poems=getPoems(); 
  const id="p"+Date.now();
  poems.push({id,title,text,category,rating:0,comments:[]}); 
  setPoems(poems);
  document.getElementById("poemTitle").value=""; 
  document.getElementById("poemText").value="";
  renderPoems();
}

// SEARCH & FILTER
document.getElementById("searchBox").oninput=renderPoems;
document.getElementById("categoryFilter").onchange=renderPoems;

// THEME TOGGLE
document.querySelector(".toggle-theme").onclick=()=>{
  document.body.classList.toggle("light");
  localStorage.setItem("theme", document.body.classList.contains("light")?"light":"dark");
}

// SUBSCRIBE
document.querySelector(".subscribe-btn").onclick=()=>{document.getElementById("subscribeModal").style.display="flex";}
document.getElementById("subscribeBtn").onclick=()=>{
  const email=document.getElementById("subscriberEmail").value.trim();
  const regex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if(!regex.test(email)){alert("D√ºzg√ºn email daxil edin!"); return;}
  alert(`T…ô≈ü…ôkk√ºrl…ôr, ${email} abun…ô oldu!`);
  document.getElementById("subscriberEmail").value=""; 
  document.getElementById("subscribeModal").style.display="none";
}

renderPoems();
</script>
</body>
</html>
